<!DOCTYPE html>
<html lang="english">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Setup Xavier NX Board w/ NVMe</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="/" rel="canonical" />

  <!-- Feed -->

  <link href="/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="/theme/css/code_blocks/github.css" rel="stylesheet">

    <!-- CSS specified by the user -->


    <link href="/assets/css/myblog.css" type="text/css" rel="stylesheet" />

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


  <link href="/2021/05/setup-xavier-nx.html" rel="canonical" />

    <meta name="description" content="Setting up Xavier was a pain, partially because i wasn't aware of how to use Nvidia SDK Manager and partially because i am not good...">

    <meta name="author" content="satyajit-ghana">

    <meta name="tags" content="nvidia">
    <meta name="tags" content="jetson">
    <meta name="tags" content="xavier nx">
    <meta name="tags" content="vscode">
    <meta name="tags" content="linux">




<!-- Open Graph -->
<meta property="og:site_name" content="Satyajit Ghana"/>
<meta property="og:title" content="Setup Xavier NX Board w/ NVMe"/>
<meta property="og:description" content="Setting up Xavier was a pain, partially because i wasn't aware of how to use Nvidia SDK Manager and partially because i am not good..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/2021/05/setup-xavier-nx.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2021-05-07 19:30:00+05:30"/>
<meta property="article:modified_time" content="2021-05-07 19:30:00+05:30"/>
<meta property="article:author" content="/author/satyajit-ghana">
<meta property="article:section" content="tutorial"/>
<meta property="article:tag" content="nvidia"/>
<meta property="article:tag" content="jetson"/>
<meta property="article:tag" content="xavier nx"/>
<meta property="article:tag" content="vscode"/>
<meta property="article:tag" content="linux"/>
<meta property="og:image" content="/theme/images/post-bg.jpg">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Setup Xavier NX Board w/ NVMe",
  "headline": "Setup Xavier NX Board w/ NVMe",
  "datePublished": "2021-05-07 19:30:00+05:30",
  "dateModified": "2021-05-07 19:30:00+05:30",
  "author": {
    "@type": "Person",
    "name": "satyajit-ghana",
    "url": "/author/satyajit-ghana"
  },
  "image": "/theme/images/post-bg.jpg",
  "url": "/2021/05/setup-xavier-nx.html",
  "description": "Setting up Xavier was a pain, partially because i wasn't aware of how to use Nvidia SDK Manager and partially because i am not good..."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>

              <li role="presentation"><a href="/pages/about/">About</a></li>

    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="/" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Setup Xavier NX Board w/ NVMe</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="/author/satyajit-ghana">Satyajit Ghana</a>
            | <time datetime="07 May 2021">07 May 2021</time>
        </span>
        <!-- TODO : Modified check -->
            <span class="post-meta"> | Updated on 07 May 2021</span>
            <div class="post-cover cover" style="background-image: url('/theme/images/post-bg.jpg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <h1>Setting Up / Reset / Upgrade Nvidia Jetson Xavier NX</h1>
<p>Did you know that Xavier NX can come it different flavours, some with 4xUSB3.0, some with 2xUSB3.0 + 2xUSB2.0, some with only 1xUSB3.0 + 1xUSB2.0, some with NVMe storage attached along with eMMC memory, but no sd card !!? and some with no NVMe but with only a sd card and eMMC memory ?</p>
<p>Resetting/Setting Up/Upgrading so many differnent variants is so damn frustrating ! Also using them is frustrating, i wish there was a standard procedure for it, or is it there already?</p>
<p>I wanted to update the Jetpack on my Xavier NX from 4.4 to 4.5, and it was a nightmare</p>
<ol>
<li>Updating JetPack all from command line</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo apt update
sudo apt upgrade
</code></pre></div>


<p>Now you need to modify the apt source list to point to the latest release</p>
<div class="highlight"><pre><span></span><code>sudo vim etc/apt/sources.list.d/nvidia-l4t-apt-source.list
</code></pre></div>


<p>Change the repository name and download URL in the deb commands.</p>
<p>The original commands are:</p>
<div class="highlight"><pre><span></span><code><span class="k">deb</span><span class="w"> </span><span class="s">https://repo.download.nvidia.com/jetson/common</span><span class="w"> </span><span class="kp">&lt;release&gt;</span><span class="w"> </span><span class="kp">main</span><span class="w"></span>
<span class="k">deb</span><span class="w"> </span><span class="s">https://repo.download.nvidia.com/jetson/&lt;platform&gt;</span><span class="w"> </span><span class="kp">&lt;release&gt;</span><span class="w"> </span><span class="kp">main</span><span class="w"></span>
</code></pre></div>


<p><code>&lt;release&gt;</code> is the release number of the minor release you want to upgrade to. For example, to upgrade to minor release 32.2, replace r32 with r32.2. OTA upgrades to the latest point release of the specified minor release (r32.2.1 in this case).</p>
<p>So i did that, and on first look that worked !! but there was a huge issue, i connected my camera, and it wasn't recognised, so in frustration i uninstalled docker, and wtf, i couldn't install it back on, and this is how i f'ed up.</p>
<ol>
<li>Updating using SDK Manager</li>
</ol>
<p>So now what? i decided to boot to recovery mode and reflash it. The board is from Mistral, couldn't find any documentation on how to go to recovery mode using jumper pins.</p>
<p>Here's how you would do it using jumper pins: <a href="https://www.stereolabs.com/blog/getting-started-with-jetson-xavier-nx/">https://www.stereolabs.com/blog/getting-started-with-jetson-xavier-nx/</a></p>
<p>But if you are booted into a OS, you can use this to boot to recovery</p>
<div class="highlight"><pre><span></span><code>sudo reboot --force forced-recovery
</code></pre></div>


<p>Oh damn, and this command worked!, like finally</p>
<p>So now you can use the SDK Manager to flash it !!!</p>
<p>Well . . . another issue now, SDK Manager only works on Ubuntu 18.04 and i happen to be running Ubuntu 21.04 :(( , so instead i thought, why not use a docker image for SDK Manager?</p>
<p>Here it is</p>
<div class="highlight"><pre><span></span><code>https://github.com/satyajitghana/sdk_manager_docker
</code></pre></div>


<p>Also make sure the USB wire is a good one, otherwise it wont be detected on your PC, as soon as you connect, the file manager should pick up the device as a mount. Also <code>lsusb</code> should show the Nvidia Device.</p>
<p>So simply use that and voila, you can now flash the device</p>
<p>Although it wasn't that easy eh, I had no clue what QEMU was, and that i was missing it!, simply setting up QEMU for arm64 fixed it.</p>
<blockquote>
<p>When used as a machine emulator, QEMU can run OSes and programs made for one machine (e.g. an ARM board) on a different machine (e.g. your own PC). By using dynamic translation, it achieves very good performance.</p>
</blockquote>
<p>So what SDK Manger does is builds all the packages on the host machine if needed and cross-compiles it for the ARM board, and installs it via USB</p>
<p>So fire up sdk manager from docker, connect your xavier nx, and select the type of board, basically dev kit is nvidia's original kit, and the other one is vendor versions of the xavier.</p>
<p>If you don't want to install stuff in your host machine (i.e. docker) then dont select host machine in sdk manager</p>
<p>Also the Jerson SDK Components will be installed via Network SSH, and the Jetson OS will be installed via USB, so no need to install all of them at once, i did it in two chunks, flash the OS first, and then install the components.</p>
<p>Also because all of these components will NOT install in 15GB eMMC memory, and it will run out of space.</p>
<p><img alt="s" src="/2021/05/2021-05-07_12-28.png"></p>
<p>Here's the terminal</p>
<p><img alt="s" src="/2021/05/2021-05-07_13-07.png"></p>
<blockquote>
<p>After flashing the latest JetPack, DO NOT INSTALL ANYTHING ON YOUR OWN, NOT UNLESS YOU INSTALL ALL THOSE SDK COMPONENTS FROM NVIDIA. IT WILL BREAK YOUR INSTALLATION</p>
</blockquote>
<p>But before installing the SDK Components you can mount the root on your ssd, format it before if needed, using "Disks" Program (GNOME Disk Utility)</p>
<div class="highlight"><pre><span></span><code>$ git clone https://github.com/jetsonhacks/rootOnNVMe
$ <span class="nb">cd</span> rootOnNVMe
$ sudo ./copy-rootfs-ssd.sh
$ sudo ./setup-service.sh
</code></pre></div>


<p>After flashing my Jetson 3-4 times i realsed this. After installing the OS, i used to install NoMachine (its like VNC), and the SDK Components would NOT INSTALL.</p>
<p>This was because nomachine was installing some dependencies, which nvidia's components dont't like.</p>
<blockquote>
<p>SO FIRST INSTALL ALL THOSE SDK COMPONENTS, VERY IMPORTANT, BEFORE INSTALLING ANYTHING ON YOUR OWN</p>
</blockquote>
<p>When i had got this board, we had nothing installed, and everything was build from source and installed, and damn that was suchhh as pain, especially OpenCV.</p>
<p>But the SDK Manager makes it really easy, Opencv 4+ installed quite easily ! :)</p>
<p>Love the SDK Manager</p>
<h2>Some useful links</h2>
<ul>
<li>
<p><a href="https://forums.developer.nvidia.com/t/system-throttled-due-to-over-current/167029/59">https://forums.developer.nvidia.com/t/system-throttled-due-to-over-current/167029/59</a></p>
</li>
<li>
<p><a href="https://www.jetsonhacks.com/2020/05/29/jetson-xavier-nx-run-from-ssd/">https://www.jetsonhacks.com/2020/05/29/jetson-xavier-nx-run-from-ssd/</a></p>
</li>
<li>
<p><a href="https://forums.developer.nvidia.com/t/recovery-interface/146709/3">https://forums.developer.nvidia.com/t/recovery-interface/146709/3</a></p>
</li>
<li>
<p><a href="https://github.com/atinfinity/sdk_manager_docker/issues/6">https://github.com/atinfinity/sdk_manager_docker/issues/6</a></p>
</li>
<li>
<p><a href="https://docs.nvidia.com/jetson/l4t/index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/updating_jetson_and_host.html">https://docs.nvidia.com/jetson/l4t/index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/updating_jetson_and_host.html</a></p>
</li>
<li>
<p><a href="https://developer.nvidia.com/nvidia-sdk-manager">https://developer.nvidia.com/nvidia-sdk-manager</a></p>
</li>
</ul>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Setup Xavier NX Board w/ NVMe&amp;url=/2021/05/setup-xavier-nx.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=/2021/05/setup-xavier-nx.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=/2021/05/setup-xavier-nx.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="/tag/nvidia">nvidia</a><a href="/tag/jetson">jetson</a><a href="/tag/xavier-nx">xavier nx</a><a href="/tag/vscode">vscode</a><a href="/tag/linux">linux</a>                </aside>

                <div class="clear"></div>

                <aside class="post-author">


                        <figure class="post-author-avatar">
                            <img src="/assets/images/avatar.jpg" alt="Satyajit Ghana" />
                        </figure>
                    <div class="post-author-bio">
                        <h4 class="post-author-name"><a href="/author/satyajit-ghana">Satyajit Ghana</a></h4>
                            <p class="post-author-about">ek hee moto: apun ko bohot kuch seekhna hai aur bohot kum waqt mai</p>
                            <span class="post-author-location"><i class="ic ic-location"></i> Bangalore</span>
                            <span class="post-author-website"><a href="http://github.com/satyajitghana"><i class="ic ic-link"></i> Website</a></span>
                        <!-- Social linkes in alphabet order. -->
                            <span class="post-author-github"><a target="_blank" href="https://github.com/satyajitghana"><i class="ic ic-link"></i> GitHub</a></span>
                            <span class="post-author-linkedin"><a target="_blank" href="https://www.linkedin.com/in/satyajitghana"><i class="ic ic-link"></i> LinkedIn</a></span>
                    </div>
                    <div class="clear"></div>
                </aside>

                </section>


                <aside class="post-nav">
                    <a class="post-nav-next" href="/2021/05/torchtext-new-api.html">
                        <section class="post-nav-teaser">
                            <i class="ic ic-arrow-left"></i>
                                <h2 class="post-nav-title">TorchText New API Changes</h2>
                            <p class="post-nav-excerpt">TorchText has now made many of their api's legacy, this post is tracking down the new...</p>
                        </section>
                    </a>
                    <a class="post-nav-prev" href="/2020/11/fix-so-file-errors.html">
                        <section class="post-nav-teaser">
                            <i class="ic ic-arrow-right"></i>
                                <h2 class="post-nav-title">Fix .so file errors during a CMake or Makefile build</h2>
                            <p class="post-nav-excerpt">When building a library using make, you'll get many kiunds of linking errors and .so...</p>
                        </section>
                    </a>
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script type="text/javascript" src="/theme/js/script.js"></script>

</body>
</html>